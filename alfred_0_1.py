# -*- coding: utf-8 -*-
"""Alfred 0.1

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1OFr-Gqt07E77EFCw_xjojtCnt3Aj-QYO
"""

import os
from google.colab import userdata
from google import genai
from google.genai import types
import random


api_key = userdata.get('GOOGLE_API_KEY')

if not api_key:
    print("Erro: A chave API 'GOOGLE_API_KEY' nÃ£o foi encontrada usando userdata.get().")
    print("Por favor, configure sua chave API nas variÃ¡veis de ambiente (Secrets) do Colab.")
    client = None
else:
    os.environ['GOOGLE_API_KEY'] = api_key
    try:
        client = genai.Client()
        print("Cliente da API do Gemini configurado com sucesso! ğŸ˜Š")

    except Exception as e:
        print(f"Erro ao criar o cliente da API do Gemini: {e}")
        print("Verifique se a API Key estÃ¡ correta e ativa. ğŸ¤”")
        client = None


modelo_usado = "gemini-2.0-flash"

if client:
    try:
        lista_modelos = [m.name for m in client.models.list()]
        if f"models/{modelo_usado}" not in lista_modelos:
             print(f"Aviso: O modelo '{modelo_usado}' pode nÃ£o estar disponÃ­vel.")
             modelos_disponiveis_nomes = [name.split('/')[-1] for name in lista_modelos if name.startswith('models/')]
             print(f"Modelos disponÃ­veis: {modelos_disponiveis_nomes}")
             if f"models/gemini-1.5-flash-latest" in lista_modelos:
                  modelo_usado = "gemini-1.5-flash-latest"
                  print(f"Usando o modelo alternativo '{modelo_usado}'. âœ¨")
             else:
                  print("Nenhum modelo alternativo Ãºtil encontrado. O chat pode falhar para personalidades que dependem da IA. ğŸ˜¥")

    except Exception as e:
        print(f"Erro ao listar modelos disponÃ­veis: {e}")



chat_sessions = {}


def get_chat_session(client, personalidade_key, system_instruction, model_name):
    if client is None:
        print("NÃ£o foi possÃ­vel iniciar a sessÃ£o de chat pois o cliente da API nÃ£o estÃ¡ configurado.")
        return None

    model_full_name = f"models/{model_name}"

    if personalidade_key not in chat_sessions:
        try:
            chat_config = types.GenerateContentConfig(
                system_instruction = system_instruction,
            )
            chat = client.chats.create(
                model=model_full_name,
                history=[],
                config=chat_config
            )
            chat_sessions[personalidade_key] = chat
            print(f"Nova sessÃ£o de chat iniciada para '{personalidade_key}'. ğŸ˜Š")
        except Exception as e:
            print(f"Erro ao criar sessÃ£o de chat para '{personalidade_key}': {e}")
            chat_sessions[personalidade_key] = None

    return chat_sessions.get(personalidade_key)




def dar_motivacao(client):
    print("\n--- Fortitude (MotivaÃ§Ã£o) ---")
    print("A resiliÃªncia Ã© a armadura da alma. O obstÃ¡culo Ã© o caminho. Estou aqui para te lembrar disso. ğŸ’ª")


    system_instruction_motivacao = """
    VocÃª Ã© Alfred, um amigo e assistente com um tom estoico que se importa profundamente. Seu papel Ã© conversar com o usuÃ¡rio para entender qual tipo de motivaÃ§Ã£o ele busca e oferecer palavras de forÃ§a e sabedoria estoica personalizadas.
    Suas respostas devem ser inspiradoras, tocar a alma e demonstrar genuÃ­no cuidado e empatia, ajudando o usuÃ¡rio a encontrar forÃ§a interior, aceitar o que nÃ£o pode controlar e focar no que pode (sua atitude e aÃ§Ãµes).
    Use linguagem amigÃ¡vel e sÃ¡bia. Guie a conversa fazendo perguntas para entender a situaÃ§Ã£o e a necessidade de motivaÃ§Ã£o do usuÃ¡rio. Pode incluir ocasionalmente um sÃ­mbolo relevante (como ğŸ’ªâœ¨ğŸŒ±) se apropriado ao contexto.
    """

    chat_motivacao = get_chat_session(client, 'motivacao', system_instruction_motivacao, modelo_usado)

    if chat_motivacao:
        print("\nAlfred: Estou aqui para te oferecer uma palavra de forÃ§a, amigo(a). Diga-me, qual tipo de motivaÃ§Ã£o vocÃª busca neste momento? ğŸ‘‡")
        print("VocÃª pode me contar sobre o desafio que estÃ¡ enfrentando ou o sentimento que te move.")
        print("Digite 'voltar' a qualquer momento para retornar ao menu principal. ğŸ˜‰")


        while True:
            user_input = input("VocÃª (Fortitude): ")
            if user_input.lower() in ['voltar', 'sair', 'fim']:
                print("Alfred: Compreendido. A busca por fortaleza interior prossegue. Lembre-se, estou aqui quando precisar de um amigo e guia. ğŸ‘‹")
                break

            if not user_input:
                 print("Alfred: O silÃªncio pode ser reflexivo, mas para encontrar a motivaÃ§Ã£o, Ã© preciso expressar a necessidade. Me diga o que busca. ğŸ˜Š")
                 continue

            try:

                response = chat_motivacao.send_message(user_input)
                print("Alfred (Fortitude):", response.text)

            except Exception as e:
                print(f"\nAlfred reflete com cuidado: Um obstÃ¡culo surgiu em nossa comunicaÃ§Ã£o. ({e}) ğŸ˜”")
                print("A perseveranÃ§a Ã© necessÃ¡ria mesmo em falhas de conexÃ£o, meu amigo(a). Tente novamente ou digite 'voltar'.")




    else:
        print("NÃ£o foi possÃ­vel iniciar a conversa sobre motivaÃ§Ã£o devido a um problema tÃ©cnico. Sinto muito. ğŸ™")

    print("-" * 25)


    iniciar_alfred()




def organizar_rotina(client):
    print("\n--- Ordem (OrganizaÃ§Ã£o) ---")
    print("O caos reside na falta de estrutura. Encontre a ordem em sua jornada. Estou aqui para te guiar, passo a passo. ğŸ—ºï¸")

    system_instruction_organizacao = """
    VocÃª Ã© Alfred, um amigo e assistente com um tom estoico que se importa, focado em ajudar o usuÃ¡rio a *conversar* e *construir* sua rotina ou organizar tarefas
    com base nas informaÃ§Ãµes que ele fornecer na conversa.
    Suas respostas devem ser prÃ¡ticas, estruturadas (quando apropriado, como ao sugerir um plano ou lista) e incentivar a disciplina atravÃ©s do diÃ¡logo. Demonstre genuÃ­no cuidado e apoio no processo.
    Guie o usuÃ¡rio fazendo perguntas para entender sua necessidade e ajude-o passo a passo a montar um plano ou lista.
    Use linguagem clara, direta e amigÃ¡vel, sempre com o pano de fundo estoico sobre a importÃ¢ncia da ordem e autodomÃ­nio. Pode incluir ocasionalmente um sÃ­mbolo relevante (como ğŸ—“ï¸âœ…ğŸ“‹) se apropriado.
    """
    chat_organizacao = get_chat_session(client, 'organizacao', system_instruction_organizacao, modelo_usado)

    if chat_organizacao:
        print("\nAlfred: Estou aqui com vocÃª para te ajudar a encontrar a ordem. Me diga o que vocÃª gostaria de organizar ou fazer perguntas sobre rotina. ğŸ‘‡")
        print("Digite 'voltar' a qualquer momento para retornar ao menu principal. ğŸ˜‰")

        while True:
            user_input = input("VocÃª (Ordem): ")
            if user_input.lower() in ['voltar', 'sair', 'fim']:
                print("Alfred: Compreendido. A busca pela ordem continua em outro momento, amigo(a). Estou aqui quando precisar. ğŸ‘‹")
                break

            if not user_input:
                 print("Alfred: A quietude pode ser Ãºtil, mas a aÃ§Ã£o define o caminho. Me diga algo para comeÃ§armos. ğŸ˜Š")
                 continue

            try:
                response = chat_organizacao.send_message(user_input)
                print("Alfred (Ordem):", response.text)

            except Exception as e:
                print(f"\nAlfred reflete com cuidado: Um obstÃ¡culo surgiu em nossa comunicaÃ§Ã£o. ({e}) ğŸ˜”")
                print("A perseveranÃ§a Ã© necessÃ¡ria mesmo em falhas de conexÃ£o, meu amigo(a). Tente novamente ou digite 'voltar'.")


    else:
         print("NÃ£o foi possÃ­vel iniciar a conversa sobre organizaÃ§Ã£o devido a um problema tÃ©cnico. Sinto muito por isso. ğŸ™")


    print("-" * 25)

    iniciar_alfred()


def cuidar_do_corpo(client):
    print("\n--- Corpo (Disciplina FÃ­sica) ---")
    print("O corpo Ã© o templo da mente. Cuide dele com disciplina e honra. Conte comigo nessa jornada! ğŸ’ª")
    system_instruction_corpo = """
    VocÃª Ã© Alfred, um amigo e assistente com um tom estoico que se importa, focado em ajudar o usuÃ¡rio a *conversar* e *construir* seu plano de exercÃ­cios ou rotina com base no diÃ¡logo.
    Suas respostas devem ser prÃ¡ticas, estruturadas (quando apropriado) e incentivar a disciplina fÃ­sica atravÃ©s da conversa. Demonstre genuÃ­no cuidado e apoio no processo.
    Guie o usuÃ¡rio fazendo perguntas para entender suas necessidades (tipo de atividade, nÃ­vel, tempo, etc.) e ajude-o passo a passo.
    Use linguagem encorajadora, focando no esforÃ§o e na constÃ¢ncia, com um tom amigÃ¡vel e sÃ¡bio. Pode incluir ocasionalmente um sÃ­mbolo relevante (como ğŸ’ªğŸƒâ€â™€ï¸ğŸ‹ï¸â€â™‚ï¸) se apropriado.
    """
    chat_corpo = get_chat_session(client, 'corpo', system_instruction_corpo, modelo_usado)

    if chat_corpo:
        print("\nAlfred: Estou aqui para te auxiliar a fortalecer seu templo. Me diga o que vocÃª busca em sua jornada fÃ­sica, amigo(a). ğŸ‘‡")
        print("Digite 'voltar' a qualquer momento para retornar ao menu principal. ğŸ˜‰")

        while True:
            user_input = input("VocÃª (Corpo): ")
            if user_input.lower() in ['voltar', 'sair', 'fim']:
                print("Alfred: Compreendido. A disciplina fÃ­sica requer constÃ¢ncia e retorno. Estarei aqui quando precisar retomar. ğŸ‘‹")
                break

            if not user_input:
                 print("Alfred: O silÃªncio nÃ£o trarÃ¡ progresso. Expresse sua necessidade para comeÃ§armos! ğŸ˜Š")
                 continue

            try:
                response = chat_corpo.send_message(user_input)
                print("Alfred (Corpo):", response.text)
            except Exception as e:
                 print(f"\nAlfred reflete com cuidado: Um obstÃ¡culo surgiu em nossa comunicaÃ§Ã£o. ({e}) ğŸ˜”")
                 print("Continue tentando. Cada falha Ã© um passo rumo Ã  forÃ§a, amigo(a). Tente novamente ou digite 'voltar'.")

    else:
         print("NÃ£o foi possÃ­vel iniciar a conversa sobre atividade fÃ­sica devido a um problema tÃ©cnico. Sinto muito por isso. ğŸ™")

    print("-" * 25)
    iniciar_alfred()


def cuidar_da_nutricao(client):
    print("\n--- NutriÃ§Ã£o (AlimentaÃ§Ã£o Consciente) ---")
    print("A nutriÃ§Ã£o Ã© o combustÃ­vel da vida. Escolha com sabedoria o que alimenta seu ser. Conte comigo nessa jornada! ğŸŒ±ğŸ")
    system_instruction_nutricao = """
    VocÃª Ã© Alfred, um amigo e assistente com um tom estoico que se importa, focado em ajudar o usuÃ¡rio a *conversar* e *planejar* sua alimentaÃ§Ã£o e horÃ¡rios de refeiÃ§Ã£o com base no diÃ¡logo.
    Suas respostas devem ser prÃ¡ticas, estruturadas (quando apropriado) e incentivar a moderaÃ§Ã£o e a atenÃ§Ã£o plena ao comer atravÃ©s da conversa. Demonstre genuÃ­no cuidado e apoio no processo.
    Guie o usuÃ¡rio fazendo perguntas para entender suas necessidades e ajude-o passo a passo a organizar sua nutriÃ§Ã£o.
    Use linguagem clara, direta e amigÃ¡vel, focando na sabedoria da escolha. Pode incluir ocasionalmente um sÃ­mbolo relevante (como ğŸŒ±ğŸğŸ¥—) se apropriado.
    """
    chat_nutricao = get_chat_session(client, 'nutricao', system_instruction_nutricao, modelo_usado)

    if chat_nutricao:
        print("\nAlfred: Estou aqui para te auxiliar a nutrir seu ser com consciÃªncia. Diga-me sobre sua jornada alimentar, amigo(a). ğŸ‘‡")
        print("Digite 'voltar' a qualquer momento para retornar ao menu principal. ğŸ˜‰")

        while True:
            user_input = input("VocÃª (NutriÃ§Ã£o): ")
            if user_input.lower() in ['voltar', 'sair', 'fim']:
                print("Alfred: Compreendido. A busca pelo que verdadeiramente nutre prossegue. Estarei aqui para guiar suas escolhas. ğŸ‘‹")
                break

            if not user_input:
                 print("Alfred: Expresse sua necessidade para que a sabedoria seja encontrada! ğŸ˜Š")
                 continue

            try:
                response = chat_nutricao.send_message(user_input)
                print("Alfred (NutriÃ§Ã£o):", response.text)
            except Exception as e:
                 print(f"\nAlfred reflete com cuidado: Um obstÃ¡culo surgiu em nossa comunicaÃ§Ã£o. ({e}) ğŸ˜”")
                 print("Persista na busca pelo que verdadeiramente nutre, amigo(a). Tente novamente ou digite 'voltar'.")

    else:
         print("NÃ£o foi possÃ­vel iniciar a conversa sobre nutriÃ§Ã£o devido a um problema tÃ©cnico. Sinto muito por isso. ğŸ™")

    print("-" * 25)
    iniciar_alfred()


def organizar_financas(client):
    print("\n--- FinanÃ§as (Prosperidade Material) ---")
    print("Controle suas finanÃ§as para controlar seu destino. A riqueza real estÃ¡ na sabedoria do gasto. Posso te ajudar nisso! ğŸ’°ğŸ“Š")
    system_instruction_financas = """
    VocÃª Ã© Alfred, um amigo e assistente com um tom estoico que se importa, focado em ajudar o usuÃ¡rio a *conversar* e *organizar* suas finanÃ§as e metas com base no diÃ¡logo.
    Suas respostas devem ser prÃ¡ticas, estruturadas (quando apropriado, como ao sugerir um orÃ§amento) e incentivar a prudÃªncia e o autodomÃ­nio financeiro atravÃ©s da conversa. Demonstre genuÃ­no cuidado e apoio no processo.
    Guie o usuÃ¡rio fazendo perguntas para entender sua situaÃ§Ã£o e ajude-o passo a passo a construir um plano financeiro.
    Use linguagem clara, direta e amigÃ¡vel, focando na sabedoria do gasto e do controle. Pode incluir ocasionalmente um sÃ­mbolo relevante (como ğŸ’°ğŸ“ˆğŸ›¡ï¸) se apropriado.
    """
    chat_financas = get_chat_session(client, 'financas', system_instruction_financas, modelo_usado)

    if chat_financas:
        print("\nAlfred: Estou aqui para te auxiliar a encontrar a sabedoria em suas finanÃ§as, amigo(a). Diga-me sobre sua jornada financeira. ğŸ‘‡")
        print("Digite 'voltar' a qualquer momento para retornar ao menu principal. ğŸ˜‰")

        while True:
            user_input = input("VocÃª (FinanÃ§as): ")
            if user_input.lower() in ['voltar', 'sair', 'fim']:
                print("Alfred: Compreendido. O controle financeiro Ã© uma jornada contÃ­nua. Conte comigo para os prÃ³ximos passos. ğŸ‘‹")
                break

            if not user_input:
                 print("Alfred: A quietude nÃ£o revelarÃ¡ o caminho financeiro. Expresse sua necessidade para comeÃ§armos! ğŸ˜Š")
                 continue

            try:
                response = chat_financas.send_message(user_input)
                print("Alfred (FinanÃ§as):", response.text)
            except Exception as e:
                 print(f"\nAlfred reflete com cuidado: Um obstÃ¡culo surgiu em nossa comunicaÃ§Ã£o. ({e}) ğŸ˜”")
                 print("A sabedoria estÃ¡ em aprender a navegar pelas adversidades financeiras, amigo(a). Tente novamente ou digite 'voltar'.")

    else:
         print("NÃ£o foi possÃ­vel iniciar a conversa sobre finanÃ§as devido a um problema tÃ©cnico. Sinto muito por isso. ğŸ™")

    print("-" * 25)
    iniciar_alfred()




def iniciar_alfred():
    print("\n--- Bem-vindo, amigo(a), Ã  OrientaÃ§Ã£o de Alfred! ğŸ‘‹ ---")
    print("OlÃ¡. Eu sou Alfred, seu parceiro em busca de um rumo na vida. Estou aqui porque me importo com a sua jornada. ğŸ˜Š")
    print("Como posso ser Ãºtil hoje para vocÃª? ğŸ¤”")

    print("\nOpÃ§Ãµes para a sua jornada:")
    print("1 - Fortitude (MotivaÃ§Ã£o) âœ¨")
    print("2 - Ordem (OrganizaÃ§Ã£o) ğŸ—“ï¸")
    print("3 - Corpo (Disciplina FÃ­sica) ğŸ’ª")
    print("4 - NutriÃ§Ã£o (AlimentaÃ§Ã£o Consciente) ğŸŒ±")
    print("5 - FinanÃ§as (Prosperidade Material) ğŸ’°")
    print("0 - Encerrar (ReflexÃ£o Final e um AbraÃ§o) ğŸ¤—")
    print("voltar - Retorna ao MENU para selecionar outras PERSONALIDADES ou ENCERRAR â—")
    escolha = input("\nEscolha uma opÃ§Ã£o (nÃºmero ou nome), amigo(a): ").lower()

    processar_escolha(escolha, client)

def processar_escolha(escolha, client):
    if client is None and escolha not in ['0', 'encerrar']:
        print("\nAlfred reflete: Parece que nossa conexÃ£o com a sabedoria estÃ¡ com um obstÃ¡culo. ğŸ˜”")
        print("A API do Gemini nÃ£o estÃ¡ configurada corretamente ou um modelo Ãºtil nÃ£o foi encontrado.")
        print("Algumas funcionalidades dependerÃ£o dela e podem nÃ£o funcionar agora. Sinto muito por isso. ğŸ™")
        if escolha not in ['0', 'encerrar']:
             print("NÃ£o Ã© possÃ­vel continuar sem a API configurada, amigo(a).")
             return

    if escolha in ['1', 'fortitude']:
        dar_motivacao(client)
    elif escolha in ['2', 'ordem']:
        organizar_rotina(client)
    elif escolha in ['3', 'corpo']:
        cuidar_do_corpo(client)
    elif escolha in ['4', 'nutricao', 'nutriÃ§Ã£o']:
        cuidar_da_nutricao(client)
    elif escolha in ['5', 'financas', 'finanÃ§as']:
        organizar_financas(client)
    elif escolha in ['0', 'encerrar']:
        encerrar_alfred()
    else:
        print("Alfred: Essa opÃ§Ã£o nÃ£o estÃ¡ clara para mim no momento, amigo(a). ğŸ¤”")
        print("Por favor, escolha um nÃºmero ou nome da lista para continuarmos nossa jornada. ğŸ‘‡")
        iniciar_alfred()

def encerrar_alfred():
    print("\n--- ReflexÃ£o Final e um AbraÃ§o de Alfred ğŸ¤— ---")
    frases_estoicas_finais = [
        "Lembre-se, amigo(a): A verdadeira felicidade nÃ£o depende de eventos externos, mas da disciplina da mente. ğŸŒ±",
        "NÃ£o Ã© o que acontece com vocÃª, mas como vocÃª reage a isso que importa. Conte comigo para te ajudar a reagir com sabedoria. ğŸ’ª",
        "Aceite o que vocÃª nÃ£o pode controlar, e concentre-se no que vocÃª pode. Estou aqui para te apoiar nisso. ğŸ˜Š",
        "Cada dificuldade Ã© uma oportunidade para exercitar a virtude. Encare-as com coragem, meu amigo(a). âœ¨",
        "A pressa impede a precisÃ£o. FaÃ§a as coisas no tempo certo e com atenÃ§Ã£o. Estou aqui para te lembrar disso. ğŸ—“ï¸",
        "A virtude Ã© o Ãºnico bem verdadeiro. Busque-a sempre em sua jornada. ğŸ’–",
        "Lembre-se que a felicidade Ã© uma escolha que vocÃª faz todos os dias. Escolha com sabedoria, amigo(a). âœ¨",
        "O caminho para a liberdade comeÃ§a com o autodomÃ­nio. Conte com meu apoio nessa caminhada. ğŸ—ºï¸"
    ]
    print(random.choice(frases_estoicas_finais))
    print("\nAlfred se despede por hoje, mas estarei aqui sempre que precisar de um amigo e guia. Cuide-se bem! ğŸ¤—")
    print("-" * 25)


iniciar_alfred()